<!DOCTYPE html>
<html>
    <head>
        <link rel='stylesheet' href='/stylesheets/style.css' />
        <a href="/home" class="btn btn-primary my-2">Home</a>
        <a href="/logout" class="btn btn-primary my-2">Logout</a>

        <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"
        ></script>
        <script>
            $(document).ready(function() {
                $(".myBtn").on('click', function() {
                    alert($(this).prevAll('.id'));
                    $.ajax({
                        method: "GET",
                        url: "/question/retrieve/" + $(this).prevAll('.id').val(),
                        dataType: "json",
                        data: {
                            "id": $(this).prevAll('.id').val()
                        },
                        success: function(result, success) {
                            if (result) {
                                
                            }
                        }
                    });

                });
            });
        </script>
    </head>
    <body>
        <div>
            <h1>All the Questions</h1>
            <label>Create A Question!</label>
            <a href="/question/create">
                <button>New Question</button>
            </a>
            <br><br>
        </div>
        <table id="questionTable">
            <tr>
                <th>Language</th>
                <th>Topic</th>
                <th>Quesion</th>
                <th>Ratio</th>
                <th>Options</th>
            </tr>
            <% Questions.forEach(function(quest) { %>
                <input type="hidden" name="id" class="id" value="<%= quest._id %>">
                <tr>
                    <th><%= quest.language %></th>
                    <th><%= quest.topic %></th>
                    <th><%= quest.question %></th>
                    <th><%= quest.correct %>/<%= quest.attempts %> = <%= (quest.correct / quest.attempts) * 100 %>%</th>
                    <th>
                        <form action="/question/edit" method="POST">
                            <button id="quest" class="quest" name="quest" value="<%= quest._id %>">Edit</button>
                        </form>
                        <form action="/question/delete" method="POST">
                            <button id="item" class="item" name="item" value="<%= quest._id %>">Delete</button>
                        </form>
                    </th>                    
                </tr>
            <% }); %>   
        </table>
    </body>
</html>