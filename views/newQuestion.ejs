<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <link rel='stylesheet' href='/stylesheets/style.css' />
        <a href="/login" class="btn btn-primary my-2">Login</a>
        <a href="/signup" class="btn btn-primary my-2">Create Account</a>

        <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"
        ></script>

        <script>
            $(document).ready(function() {
                $("#topic").on('change', function() {
                    if ($("#topic").val() == "new") {
                        $("#addTopic").css('display', 'block');
                        $("#newTopic").prop('required', true);
                    } else {
                        $("#addTopic").css('display', 'none');
                        $("#newTopic").val('');
                        $("#newTopic").prop('required', false);
                    }
                }); // Adding a new topic

                $("#language").on('change', function() {
                    if ($("#language").val() == "new") {
                        $("#addLanguage").css('display', 'block');
                        $("#newLanguage").prop('required', true);
                    } else {
                        $("#addLanguage").css('display', 'none');
                        $("#newLanguage").val('');
                        $("#newLanguage").prop('required', false);
                    }
                }); // Adding a new language

            }); // document.ready
        </script>
    </head>
    <body>
        <div>
            <h1>Question Builder</h1>
            <label>Go Back(temporary)</label>
            <a href="/question">
                <button>Cancel</button>
             </a>
             <br><br>
        </div>
        <form action="/question/create/new" method="POST">
            <div>
                <label>Select the Language</label>
                <select id="language" name="language" required>
                    <option selected disabled value="">Please select</option>
                    <option value="new">Add New Language</option>
                    <% CurrentLangs.forEach(function(lang) { %>
                        <option value="<%= lang %>"><%= lang %></option>
                    <% }); %> 
                    
                </select>
            </div>
            <div id="addLanguage" style="display: none;">
                <br>
                <label>Please enter the new Language! </label>
                <br>
                <textarea id="newLanguage" name="newLanguage" rows="1" cols="30" maxlength="20" placeholder="Enter answer A..."></textarea>
                <br>
                <label>(limit 20 characters)</label>
            </div>
            <br>
            <div>
                <label>Select the Topic</label>
                <select id="topic" name="topic" required>
                    <option selected disabled value="">Please select</option>
                    <option value="new">Add New Topic</option>
                    <% CurrentTopics.forEach(function(topic) { %>
                        <option value="<%= topic %>"><%= topic %></option>
                    <% }); %>             
                </select>
                <br>
            </div>
            <div id="addTopic" style="display: none;">
                <br>
                <label>Please enter the new Topic!</label>
                <br>
                <textarea id="newTopic" name="newTopic" rows="1" cols="30" maxlength="20" placeholder="Enter answer A..."></textarea>
                <br>
                <label>(limit 20 characters)</label>
            </div>
            <br>
            <div>
                <label>Please enter the question below!</label>
                <br>
                <div>
                    <textarea id="question" name="question" rows="5" cols="60" required placeholder="Enter question here..."></textarea>
                </div>
            </div>    
            <br>
            <div>
                <label>Please enter the answer explanation!</label>
                <br>
                <div>
                    <textarea id="explanation" name="explanation" rows="5" cols="60" required placeholder="Enter explanation here..."></textarea>
                </div>
            </div>
            <br>
            <% Choices.forEach(function(choice) { %>
                <div>
                    <label>Enter answer <%= choice %>!</label>
                    <br>
                    <div>
                        <input id="choice<%= choice %>" name="choice<%= choice %>" size="60" required pattern="\S(.*\S)?" title="Only whitepace in between words" placeholder="Enter answer <%= choice %>...">
                    </div>
                </div>
                <br>
            <% }); %>
            <div>
                <label>Please select the answer choice:</label>
                <br>
                <% Choices.forEach(function(choice) { %>
                    <input type="radio" id="<%= choice %>" name="answer" value="<%= choice %>" required>
                    <label for="<%= choice %>">Answer <%= choice %></label><br>
                <% }); %>
            </div>
            <br>
            <div>
                <button>Submit</button>
            </div>
        </form>
    </body>
</html>